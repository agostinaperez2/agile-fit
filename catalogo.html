<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Agile Fit â€¢ ColecciÃ³n</title>
<style>
  :root{--black:#111;--muted:#777}
  *{box-sizing:border-box}
  body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;background:#fff;color:#111}
  header{position:sticky;top:0;background:#fff;border-bottom:1px solid #eee;z-index:10}
  .container{max-width:1120px;margin:0 auto;padding:0 16px}
  .header-in{display:flex;align-items:center;justify-content:space-between;padding:12px 0}
  .brand{display:flex;align-items:center;gap:8px}
  .brand img{height:28px}
  .nav button{background:none;border:none;cursor:pointer;padding:10px 8px;margin:0 6px;border-bottom:2px solid transparent;letter-spacing:2px}
  .nav button.active{border-color:var(--black)}
  .muted{color:var(--muted)}
  h2{font-weight:400;letter-spacing:1px;margin:24px 0 8px}
  .grid{display:grid;gap:24px;grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}
  .card{border:1px solid #eee;padding:12px;transition:.2s}
  .card:hover{box-shadow:0 2px 10px rgba(0,0,0,.08);transform:translateY(-2px)}
  .card img{width:100%;height:260px;object-fit:cover;background:#f5f5f5}
  .row{display:flex;align-items:center;gap:8px}
  .input{width:100%;padding:10px;border:1px solid #ddd}
  .btn{padding:10px 14px;border:1px solid var(--black);background:var(--black);color:#fff;cursor:pointer}
  .btn.secondary{background:#fff;color:var(--black)}
  .toolbar{display:flex;gap:8px;align-items:center;justify-content:space-between;margin:10px 0 18px}
  .pill{font-size:.9rem;border:1px solid #e8e8e8;padding:6px 10px;border-radius:999px}
  .footer{border-top:1px solid #eee;margin-top:40px;padding:24px 0;color:var(--muted);font-size:14px;text-align:center}
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:16px}
  .modal.open{display:flex}
  .panel{background:#fff;border:1px solid #eee;padding:16px;width:720px;max-width:100%}
  table{width:100%;border-collapse:collapse;margin-top:8px}
  th,td{border:1px solid #eee;padding:8px;text-align:center}
  th{background:#fafafa}
</style>
</head>
<body>

<header>
  <div class="container header-in">
    <div class="brand">
      <img src="https://github.com/agostinaperez2/agile-fit/blob/main/ChatGPT%20Image%207%20oct%202025,%2004_56_26%20p.m..png?raw=true" alt="Agile Fit" onerror="this.style.display='none'"/>
      <span style="letter-spacing:4px;font-size:12px">AGILE FIT</span>
    </div>
    <nav class="nav" aria-label="LÃ­neas">
      <button class="tab" data-line="Berry">BERRY</button>
      <button class="tab" data-line="Cocoa">COCOA</button>
      <button class="tab" data-line="Merlot">MERLOT</button>
    </nav>
    <div class="row">
      <button class="btn secondary" id="tallesBtn">Tabla de talles</button>
      <span class="pill">ðŸ›’ <span id="cartCount">0</span></span>
    </div>
  </div>
</header>

<main class="container">
  <div class="toolbar">
    <div class="muted">ColecciÃ³n â€¢ <span id="currentLine">Todas</span></div>
    <div class="row">
      <button class="btn secondary" id="autoFotos">Auto-fotos</button>
      <button class="btn secondary" id="refrescar">Refrescar</button>
    </div>
  </div>

  <section>
    <h2 id="tituloLinea">Todas</h2>
    <div class="grid" id="grid"></div>
  </section>
</main>

<footer class="footer">Â© 2025 Agile Fit Activewear â€” Todos los derechos reservados</footer>

<!-- Modal tabla de talles -->
<div class="modal" id="modalTalles">
  <div class="panel">
    <div class="row" style="justify-content:space-between">
      <h3 style="margin:0">Tabla de talles (guÃ­a orientativa)</h3>
      <button class="btn secondary" id="cerrarTalles">Cerrar</button>
    </div>
    <h4 style="margin-top:12px">Tops / Bustier</h4>
    <table>
      <tr><th>Talle</th><th>Busto (cm)</th><th>Espalda (cm)</th></tr>
      <tr><td>XS</td><td>78-84</td><td>63-68</td></tr>
      <tr><td>S</td><td>85-90</td><td>69-74</td></tr>
      <tr><td>M</td><td>91-96</td><td>75-80</td></tr>
      <tr><td>L</td><td>97-103</td><td>81-86</td></tr>
      <tr><td>XL</td><td>104-110</td><td>87-92</td></tr>
    </table>
    <h4 style="margin-top:16px">Bottoms (leggings/shorts)</h4>
    <table>
      <tr><th>Talle</th><th>Cintura (cm)</th><th>Cadera (cm)</th></tr>
      <tr><td>XS</td><td>58-63</td><td>84-89</td></tr>
      <tr><td>S</td><td>64-69</td><td>90-95</td></tr>
      <tr><td>M</td><td>70-76</td><td>96-102</td></tr>
      <tr><td>L</td><td>77-84</td><td>103-110</td></tr>
      <tr><td>XL</td><td>85-92</td><td>111-118</td></tr>
    </table>
  </div>
</div>

<script>
const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRrw-tt87mw8S_p8hCbedod-pwZMzXgJQ5Ey4-Hb_O_BpRpC9moQUP3CICLwYg9LT-vS825s7MiO6_y/pub?gid=9643623&single=true&output=csv";

const JAH_COLLECTIONS = {
  Berry: "https://jahnisioriginals.com.ar/trascendencia/berry/",
  Cocoa: "https://jahnisioriginals.com.ar/trascendencia/cocoa/",
  Merlot:"https://jahnisioriginals.com.ar/trascendencia/merlot/"
};

const FORCED_SIZES = {};

const currency = n => new Intl.NumberFormat("es-AR",{style:"currency",currency:"ARS",maximumFractionDigits:0}).format(Number(n||0));
function parseCSV(t){const l=t.replace(/\r/g,"").split("\n").filter(Boolean);if(!l.length)return[];const h=l[0].split(",").map(h=>h.trim().toLowerCase());return l.slice(1).map(line=>{const c=line.split(",");const r={};h.forEach((hh,i)=>r[hh]=(c[i]||"").trim());return r;});}
let products=[],cart=JSON.parse(localStorage.getItem("agile.cart")||"[]");
const saveCart=()=>localStorage.setItem("agile.cart",JSON.stringify(cart));
const updateCartCount=()=>document.getElementById("cartCount").textContent=cart.reduce((s,i)=>s+i.qty,0);

async function loadSheet(){
  const res=await fetch(SHEET_CSV_URL);
  const rows=parseCSV(await res.text());
  return rows.map(r=>({nombre:r.nombre,precio:r.precio,linea:r.linea}));
}

function render(){
  const grid=document.getElementById("grid");
  grid.innerHTML="";
  products.forEach(p=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <div style="height:260px;background:#f5f5f5"></div>
      <div style="font-size:14px;margin-top:8px">${p.nombre}</div>
      <div style="font-weight:600">${currency(p.precio)}</div>`;
    grid.appendChild(card);
  });
}

(async function init(){
  products=await loadSheet();
  updateCartCount();
  render();
})();
</script>
</body>
</html>
